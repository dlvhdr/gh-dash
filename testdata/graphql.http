###
# @env-stdin-cmd GH_TOKEN gh auth token

GRAPHQL https://api.github.com/graphql HTTP/1.1
Accept: application/json
Authorization: Bearer {{GH_TOKEN}}

query PullRequestChecks($url: URI!){
  resource(url: $url) {
    ... on PullRequest {
      url
        title
        mergeStateStatus
        mergeable
        checksUrl
        checksResourcePath
        statusCheckRollup {
          commit {
            oid
          }
          state
          contexts(first: 1) {
            checkRunCount
              checkRunCountsByState {
                count
                state
              }
          }
        }
    }
  }
}

{ "url": "https://github.com/charmbracelet/bubbletea/pull/1190" }
