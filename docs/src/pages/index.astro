---
import StarlightPage from "@astrojs/starlight/components/StarlightPage.astro";
import "../styles/index.css";
import { Code, Icon } from "@astrojs/starlight/components";
import Terminal from "../components/Terminal.astro";
import Footer from "../components/Footer.astro";
import Box from "../components/Box.astro";
import Showcase from "../components/Showcase.astro";
import Discord from "../components/Discord.astro";
import FadeImages from "../components/FadeImages.astro";
import prSectionsImage from "../assets/pr-sections.png";
import { Image } from "astro:assets";
import helpSrc from "../assets/help.png";
import tokyonightSrc from "../assets/tokyo.png";
import catppuccinSrc from "../assets/catpuccin.png";
import gruvSrc from "../assets/gruv.png";
import charmVidPreviewSrc from "../assets/charm-vid-preview.jpg";
import EnhanceCard from "../components/EnhanceCard.astro";
import DiffnavCard from "../components/DiffnavCard.astro";
import DashHeroLogo from "../components/DashHeroLogo.astro";
import Hero from "../components/Hero.astro";
import SupportSection from "../components/SupportSection.astro";
---

<style is:global>
  h1#_top {
    display: none;
  }
</style>

<StarlightPage
  frontmatter={{ title: "DASH Through Your GitHub", template: "splash" }}
>
  <div class="mt-0 2xl:mt-12">
    <Hero
      tagline="A rich terminal UI for GitHub that doesn't break your flow"
      videoUrl="overview"
      githubUrl="https://github.com/dlvhdr/gh-dash"
      getStartedUrl="/getting-started/"
    >
      <DashHeroLogo />
    </Hero>
  </div>
  <div class="mt-12 text-[var(--sl-color-gray-5)]">──◇──</div>

  <h2 class="mt-8 mb-12 text-center !text-3xl">Companion Apps</h2>

  <div
    class="grid w-full grid-cols-[repeat(auto-fit,_minmax(20em,_30em))] justify-center gap-6 overflow-hidden"
  >
    <EnhanceCard />
    <DiffnavCard />
  </div>

  <div
    class="absolute top-[90vh] right-32 hidden h-10 animate-bounce rounded-2xl border border-gray-700 p-1 text-[var(--sl-color-accent)] lg:block"
  >
    <div>⌄</div>
    <div class="relative -top-8 mt-0">⌄</div>
  </div>

  <div class="mt-12 text-[var(--sl-color-gray-5)]">──◇──</div>

  <SupportSection />

  <div class="mt-16 mb-8 text-[var(--sl-color-gray-5)]">──◇──</div>

  <h2 class="mb-16 !text-3xl">Features</h2>

  <div class="lg:w-80rem flex w-[95vw] flex-col items-center gap-8 lg:gap-16">
    <Showcase>
      <Box icon="setting" header="Define Custom GitHub Filters">
        <Code
          class="overflow-auto"
          lang="yaml"
          code={`prSections:
  - title: My Pull Requests
    filters: is:open author:@me
  - title: Needs My Review
    filters: is:open review-requested:@me
issuesSections:
  - title: Ghostty
    filters: is:open ghostty-org/ghostty
  - title: Neovim
    filters: is:open neovim/neovim
`}
        />
      </Box>
      <Terminal className="w-[95vw] lg:w-[800px]">
        <video autoplay loop muted playsinline>
          <source src="/sections.webm" type="video/webm" />
          <source src="/sections.mp4" type="video/mp4" />
        </video>
      </Terminal>
    </Showcase>
    <Showcase reversed={true}>
      <Box icon="vim" header="Native Vim Keybindings" src={prSectionsImage}>
        <ul>
          <li><kbd>h/j/k/l</kbd> to move between rows/sections</li>
          <li><kbd>ctrl+d/u</kbd> to move in sidebar</li>
          <li><kbd>o</kbd> to open in browser</li>
          <li><kbd>y/Y</kbd> to copy pr number/url</li>
          <li>and more...</li>
        </ul>
      </Box>
      <div
        class="relative m-0 box-border h-[200px] w-[95vw] overflow-hidden border border-[var(--sl-color-gray-5)] bg-[#010101] lg:h-[300px] lg:w-[800px]"
      >
        <div
          class="animate-bannermove absolute top-16 left-0 flex gap-0 whitespace-nowrap"
        >
          <Image
            class="my-0 scale-160"
            src={helpSrc}
            alt="screenshot of dash with the help menu open, you can see all the keybindings for PRs and what they do."
          />
          <Image
            class="my-0 scale-160"
            src={helpSrc}
            aria-hidden={true}
            alt="duplicate image for marquee effect"
          />
        </div>
      </div>
    </Showcase>
    <Showcase>
      <Box icon="laptop" header="Set Custom Commands" src={prSectionsImage}>
        <Code
          lang="yaml"
          code={`- key: g
  name: laygit
  command: lazygit
- key: C
  name: code review
  command: >
    tmux new-window -c {{.RepoPath}}
    'nvim -c
    ":silent Octo pr edit {{.PrNumber}}"'
        `}
        />
      </Box>
      <Terminal>
        <video autoplay loop muted playsinline class="w-[95vw] lg:w-[800px]">
          <source src="/custom-commands.webm" type="video/webm" />
          <source src="/custom-commands.mp4" type="video/mp4" />
        </video>
      </Terminal>
    </Showcase>
    <Showcase reversed={true}>
      <Box icon="sun" header="Use Custom Themes" src={prSectionsImage}>
        <Code
          lang="yaml"
          code={`ui:
  sectionsShowCount: true
table:
  showSeparators: true
  compact: false
colors:
  text:
    primary: "#ffffff"
    secondary: "#c6c6c6"
# rest of theme...`}
        />
      </Box>
      <Terminal className="lg:w-[800px]">
        <FadeImages>
          <Image
            src={catppuccinSrc}
            alt="Dash running with the catppuccin theme"
          />
          <Image src={gruvSrc} alt="Dash running with the gruvbox theme" />
          <Image
            src={tokyonightSrc}
            alt="Dash running with the tokyo-night theme"
          />
        </FadeImages>
      </Terminal>
    </Showcase>
  </div>
  <div class="mt-16 flex flex-col items-center">
    <h2 class="mb-2">Why use DASH?</h2>
    <p class="mb-6 text-center lg:w-[60ch]">
      Check out this 10/10 video by <a href="https://charm.sh">Charm ✨</a> explaining
      how DASH can help you manage your GitHub experience
    </p>
    <a href="https://www.youtube.com/watch?v=5omFxcNjBQk&t" target="_blank">
      <Image
        src={charmVidPreviewSrc}
        alt="YouTube video - Manage open source like a boss (in the terminal)"
        class="w-[95vw] lg:w-[800px]"
      />
    </a>
  </div>
  <div class="mt-16 text-[var(--sl-color-gray-5)]">──◇──</div>
  <Discord class="mt-20" />
  <Footer class="mt-20" />
</StarlightPage>
